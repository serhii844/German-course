<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Integrationskurs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Подключаем внешний CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>Integrationskurs</header>

  <!-- Верхнее меню -->
  <div class="top-menu">
    <button id="btn-words" class="btn active" onclick="showSection('words')">Слова / Wörter</button>
    <button id="btn-communication" class="btn" onclick="showSection('communication')">Спілкування / Kommunikation</button>
  </div>

  <hr>

  <!-- Подменю для слов -->
  <div id="submenu-words" class="sub-menu">
    <button id="btn-adjectives" class="btn active" onclick="showWordsSection('adjectives')">Прикметники і Прислівники (антоніми) / Adjektive und Adverbien (Antonyme)</button>
    <button id="btn-numerals" class="btn" onclick="showWordsSection('numerals')">Числівники / Numerale</button>
    <button id="btn-nouns" class="btn" onclick="showWordsSection('nouns')">Іменники / Substantive</button>
    <button id="btn-verbs" class="btn" onclick="showWordsSection('verbs')">Дієслова / Verben</button>
  </div>

  <hr>

  <!-- Контент -->
  <div id="content" class="content"></div>

  <script>
    let pairs = [];

    async function loadPairs() {
      const response = await fetch("pairs.json");
      pairs = await response.json();
      startAdjectives();
    }

    function resetActiveButtons(menu) {
      if (menu === "top") {
        document.querySelectorAll(".top-menu .btn").forEach(b => b.classList.remove("active"));
      } else if (menu === "sub") {
        document.querySelectorAll(".sub-menu .btn").forEach(b => b.classList.remove("active"));
      }
    }

    function showSection(section) {
      resetActiveButtons("top");
      if (section === "words") {
        document.getElementById("btn-words").classList.add("active");
        document.getElementById("submenu-words").classList.remove("hidden");
        showWordsSection("adjectives");
      } else {
        document.getElementById("btn-communication").classList.add("active");
        document.getElementById("submenu-words").classList.add("hidden");
        document.getElementById("content").innerHTML = "<p>Тут буде контент (Спілкування / Kommunikation)</p>";
      }
    }

    function showWordsSection(type) {
      resetActiveButtons("sub");
      if (type === "adjectives") {
        document.getElementById("btn-adjectives").classList.add("active");
        startAdjectives();
      } else if (type === "numerals") {
        document.getElementById("btn-numerals").classList.add("active");
        document.getElementById("content").innerHTML = "<p>Тут буде контент (Числівники / Numerale)</p>";
      } else if (type === "nouns") {
        document.getElementById("btn-nouns").classList.add("active");
        document.getElementById("content").innerHTML = "<p>Тут буде контент (Іменники / Substantive)</p>";
      } else if (type === "verbs") {
        document.getElementById("btn-verbs").classList.add("active");
        document.getElementById("content").innerHTML = "<p>Тут буде контент (Дієслова / Verben)</p>";
      }
    }

    function startAdjectives() {
      let html = `
        <button class="btn" onclick="showAll()">Всі слова / Alle Wörter</button>
        <button class="btn" onclick="startTest()">Перевірка / Test</button>
        <div id="task"></div>
      `;
      document.getElementById("content").innerHTML = html;
    }

    function showAll() {
      let html = "<h3>Всі пари:</h3>";
      pairs.forEach(p => {
        html += `<p>${p.ua1} – ${p.ua2} → ${p.de1} – ${p.de2}</p>`;
      });
      document.getElementById("task").innerHTML = html;
    }

    function startTest() {
      let index = 0;
      let html = `
        <p>Напишіть переклад:</p>
        <div id="question"></div>
        <input type="text" id="ans1" placeholder="Переклад 1">
        <input type="text" id="ans2" placeholder="Переклад 2">
        <button class="btn" onclick="checkAnswer()">Перевірити / Prüfen</button>
        <div id="feedback"></div>
      `;
      document.getElementById("task").innerHTML = html;
      showQuestion();

      function showQuestion() {
        document.getElementById("question").innerText =
          pairs[index].ua1 + " – " + pairs[index].ua2;
        document.getElementById("ans1").value = "";
        document.getElementById("ans2").value = "";
        document.getElementById("feedback").innerText = "";
      }

      window.checkAnswer = function() {
        let a1 = document.getElementById("ans1").value.trim().toLowerCase();
        let a2 = document.getElementById("ans2").value.trim().toLowerCase();
        let ok1 = a1 === pairs[index].de1.toLowerCase();
        let ok2 = a2 === pairs[index].de2.toLowerCase();
        document.getElementById("feedback").innerText =
          (ok1 && ok2) ? "✅ Правильно / Richtig" : `❌ Неправильно / Falsch ( ${pairs[index].de1} – ${pairs[index].de2} )`;
        index = (index + 1) % pairs.length;
        setTimeout(showQuestion, 1500);
      };
    }

    loadPairs();
  </script>
</body>
</html>
